<html>

  <head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- jQuery 3.3.1 -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <!-- my stylesheet -->
    <link rel="stylesheet" href="main.css">

    <!-- Cabin font -->
    <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet">
  </head>

  <body>
    <div class="container">

      <!-- header -->
        <div class="jumbotron">
            <div class="row">
  
              <div class="col-xs-12">
                  <h1>Drew Graham</h1>
                  <h5>Hi, I make games and talk about games.</h5>
              </div>
              
              <div class="col-xs-12">
                  <h6>(I'm not a web developer)</h6>
              </div>
              
            </div>
        </div>

        <!-- games grid -->
        <div class="row" id="game-grid">

            <!-- screenshot 1-->
            <div class="col-md-4">
                <div class="thumbnail">
                  <a href="/game?gameId=foo">
                      <img src="./images/kunt.jpg" alt="Lights" style="width:100%">
                      <div class="caption">
                        <p>Game 1</p>
                      </div>
                  </a>
                </div>
            </div>

            <!-- screenshot 2-->
            <div class="col-md-4">
                <div class="thumbnail">
                  <a href="/game?gameId=foo">
                      <img src="./images/kunt.jpg" alt="Nature" style="width:100%">
                      <div class="caption">
                        <p>Game 2</p>
                      </div>
                  </a>
                </div>
            </div>
            
            <!-- screenshot 3-->
            <div class="col-md-4">
                <div class="thumbnail">
                  <a href="./game?gameId=foo">
                      <img src="./images/kunt.jpg" alt="Fjords" style="width:100%">
                      <div class="caption">
                        <p>Game 3</p>
                      </div>
                  </a>
                </div>
            </div>

            <!-- scales nicely with additional screenshots-->

        </div>

        
    </div>
  </body>

  <script type="text/javascript">
    GetGames();

    // Gets list of games from server and passes it to FillGameGrid()
    function GetGames() {
        var URL = "./getGameIds";

        $.ajax({
                type: "GET",
                url: "./getGameIds",
                dataType: "json",
                
                success: function(msg){
                    // parse response into json
                    console.log("games returned from server: " + msg);

                    // fill game grid wtih links to these games
                    FillGameGrid(msg);
                }
            });

    }
    
    // Fills game grid with thumbnails with links to games returned from server
    function FillGameGrid(games) {
      if(games == null) {
          console.log("ERROR: returned list of games is null");
      }
      else {
          // clear game grid
          $("#game-grid").html("");
          console.log(games);

          // iterate through list of game ids
          for(var i = 0; i < games.length; i++) {
              console.log("creating stub for game " + games[i]);
              $("#game-grid").append("<div class=\"col-md-4\">" +
                  "<div class=\"thumbnail\">" +
                      "<a href=\"/game?gameId=" + games[i] + "\">" +
                          "<img src=\"./images/kunt.jpg\" alt=\"Lights\" style=\"width:100%\">" +
                          "<div class=\"caption\">" +
                              "<p>Game " + (i + 1) + "</p>" +
                          "</div>" +
                      "</a>" +
                  "</div>" +
              "</div>");
          }
      }
    }
  </script>
  

</html>
